\chapter{Complete Core System Requirements}
\hypertarget{md__2home_2debil_2Lab-work-2_2architecture_2requirements}{}\label{md__2home_2debil_2Lab-work-2_2architecture_2requirements}\index{Complete Core System Requirements@{Complete Core System Requirements}}
\label{md__2home_2debil_2Lab-work-2_2architecture_2requirements_autotoc_md2}%
\Hypertarget{md__2home_2debil_2Lab-work-2_2architecture_2requirements_autotoc_md2}%
\hypertarget{md__2home_2debil_2Lab-work-2_2architecture_2requirements_autotoc_md3}{}\doxysection{\texorpdfstring{Basic map parameters}{Basic map parameters}}\label{md__2home_2debil_2Lab-work-2_2architecture_2requirements_autotoc_md3}

\begin{DoxyItemize}
\item {\bfseries{Name}}\+: 3-\/50 characters (Latin/\+Cyrillic/numbers)
\item {\bfseries{Mana}}\+: integer 0-\/10 inclusive
\item {\bfseries{Damage}}\+: minimum value 1, integer
\item {\bfseries{\doxylink{enums_8h_a6c4fc244cdc975f7fd572fa614617600}{Rarity}}}\+: 4 variants (Common, Uncommon, Rare, Epic)
\item {\bfseries{Special Types}}\+:
\item Attacking spells\+: Base\+\_\+\+DMG ≥ 1
\begin{DoxyItemize}
\item Shields\+: Stackable (cumulative)
\end{DoxyItemize}
\item Treatment\+: Base\+\_\+\+Heal ≥ 0
\end{DoxyItemize}\hypertarget{md__2home_2debil_2Lab-work-2_2architecture_2requirements_autotoc_md4}{}\doxysection{\texorpdfstring{Characters and abilities}{Characters and abilities}}\label{md__2home_2debil_2Lab-work-2_2architecture_2requirements_autotoc_md4}

\begin{DoxyItemize}
\item {\bfseries{\doxylink{classTank__Character}{Tank\+\_\+\+Character}}}\+:
\item Shielding() is available 1 time per battle
\begin{DoxyItemize}
\item Shield\+\_\+amount is combined with other shields
\end{DoxyItemize}
\item {\bfseries{\doxylink{classKnight__Character}{Knight\+\_\+\+Character}}}\+:
\begin{DoxyItemize}
\item Armoring() adds a fixed value to the armor
\end{DoxyItemize}
\item The armor is valid until the end of the battle
\item {\bfseries{\doxylink{classHealer__Character}{Healer\+\_\+\+Character}}}\+:
\item Number of treatments = \doxylink{classCharacter}{Character} level
\begin{DoxyItemize}
\item Heal\+\_\+\+MLTPL increases with the level
\end{DoxyItemize}
\end{DoxyItemize}\hypertarget{md__2home_2debil_2Lab-work-2_2architecture_2requirements_autotoc_md5}{}\doxysection{\texorpdfstring{Combat mechanics}{Combat mechanics}}\label{md__2home_2debil_2Lab-work-2_2architecture_2requirements_autotoc_md5}
{\bfseries{Calculation formulas\+:}}\hypertarget{md__2home_2debil_2Lab-work-2_2architecture_2requirements_autotoc_md6}{}\doxysection{\texorpdfstring{Armor}{Armor}}\label{md__2home_2debil_2Lab-work-2_2architecture_2requirements_autotoc_md6}

\begin{DoxyCode}{0}
\DoxyCodeLine{-\/adjusted\ damage\ efficie\_dmg\ =\ max(0,\ (base\_dmg\ *\ dmg\_MLTPL)\ -\/\ total\_armor)}

\end{DoxyCode}
\hypertarget{md__2home_2debil_2Lab-work-2_2architecture_2requirements_autotoc_md7}{}\doxysection{\texorpdfstring{Treatment when using the card}{Treatment when using the card}}\label{md__2home_2debil_2Lab-work-2_2architecture_2requirements_autotoc_md7}

\begin{DoxyCode}{0}
\DoxyCodeLine{heal\_value\ =\ base\_heal\ *\ heal\_MLTPL\ *\ efficiency}

\end{DoxyCode}


{\bfseries{Validation of actions\+:}} 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordflow}{if}\ (mana\ <\ mana\_cost)\{}
\DoxyCodeLine{\ \ \ \ raise\ NotEnoughManaError(f\textcolor{stringliteral}{"{}Need\ \{card\_cost\},\ have\ \{mana\}"{}})}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordflow}{if}\ (!was\_up)\{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{throw}\ AbilityLockedError(\textcolor{stringliteral}{"{}Shield\ already\ used"{}})}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordflow}{if}\ (!was\_armored)\{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{throw}\ AbilityLockedError(\textcolor{stringliteral}{"{}Armor\ already\ used"{}})}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md__2home_2debil_2Lab-work-2_2architecture_2requirements_autotoc_md8}{}\doxysubsection{\texorpdfstring{The AI system}{The AI system}}\label{md__2home_2debil_2Lab-work-2_2architecture_2requirements_autotoc_md8}
{\bfseries{\doxylink{classCard}{Card} selection algorithm\+:}}
\begin{DoxyEnumerate}
\item Filter by available mana
\item Sort by descending damage
\item Choosing the top 1 card
\item If the damage is equal, the priority of the cards is first
\end{DoxyEnumerate}

{\bfseries{Selection example\+:}} 
\begin{DoxyCode}{0}
\DoxyCodeLine{Cards\ in\ your\ hand:\ }
\DoxyCodeLine{-\/\ Fireball\ (cost=3,\ dmg=5)}
\DoxyCodeLine{-\/\ Heal\ (cost=2,\ heal=3)}
\DoxyCodeLine{-\/\ Shield\ (cost=1,\ armor=2)}
\DoxyCodeLine{}
\DoxyCodeLine{AI\ Selection:\ Fireball\ (max.\ damage)}

\end{DoxyCode}
\hypertarget{md__2home_2debil_2Lab-work-2_2architecture_2requirements_autotoc_md9}{}\doxysubsection{\texorpdfstring{Saving progress (temporarily for json example)}{Saving progress (temporarily for json example)}}\label{md__2home_2debil_2Lab-work-2_2architecture_2requirements_autotoc_md9}
{\bfseries{Saved data\+:}}


\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ "{}player\_name"{}:\ "{}Vova"{},}
\DoxyCodeLine{\ \ "{}characters"{}:\ \{}
\DoxyCodeLine{\ \ \ \ "{}healer"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ "{}xp"{}:\ 1200,}
\DoxyCodeLine{\ \ \ \ \ \ "{}level"{}:\ 3}
\DoxyCodeLine{\ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ "{}tank"{}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ "{}xp"{}:\ 800,}
\DoxyCodeLine{\ \ \ \ \ \ "{}level"{}:\ 2}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md__2home_2debil_2Lab-work-2_2architecture_2requirements_autotoc_md10}{}\doxysubsection{\texorpdfstring{Test scenarios}{Test scenarios}}\label{md__2home_2debil_2Lab-work-2_2architecture_2requirements_autotoc_md10}
{\bfseries{Mandatory checks\+:}}
\begin{DoxyEnumerate}
\item Creating a map with mana=10 → success
\item Creating a map with dmg=0 → error
\item Double use of Shielding() → error
\item Saving/loading level progress
\item Damage calculation for armor=5 dmg=8 and Dmg\+\_\+\+MLTPL=1.\+0 → 3 damage
\end{DoxyEnumerate}

{\bfseries{Test example\+:}} 
\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{test-card_8cpp_afeb6d4047a9b58aca40a22b0e710266a}{TEST}}(TankTest,\ ShieldLimit)\ \{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{classTank__Character}{Tank\_Character}}\ tank;}
\DoxyCodeLine{\ \ \ \ tank.Shielding();\ \textcolor{comment}{//\ OK}}
\DoxyCodeLine{\ \ \ \ ASSERT\_THROW(tank.Shielding(),\ AbilityLimitReached);}
\DoxyCodeLine{\}}

\end{DoxyCode}
 